<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    {% load static %}
    <title>æ–‡ä»¶ä¸Šä¼ ä¸­è½¬ç«™</title>
    <link rel="stylesheet" href="{% static 'css/upload.css' %}">
</head>
<body>
    <div class="container">
        <h2>ğŸ“ æ–‡ä»¶ä¸Šä¼ ä¸­è½¬ç«™</h2>

        <div class="upload-box">
            <form method="post" enctype="multipart/form-data" class="upload-form">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="upload-button">â¬† ä¸Šä¼ </button>
            </form>
        </div>

        <h3>ğŸ“„ æœ€è¿‘ä¸Šä¼ çš„æ–‡ä»¶</h3>
        {% for file in files %}
        <div class="file-entry">
            <div class="file-info">
                {% with ext=file.file_ext %}
                    <img class="file-icon"
                         src="{% static 'images/'|add:ext|add:'.png' %}"
                         onerror="this.src='{% static 'images/default.png' %}'"
                         alt="icon">
                {% endwith %}
                <div class="file-text">
                    <span class="file-title">{{ file.title }}</span>
                    <small class="file-time">ä¸Šä¼ æ—¶é—´ï¼š{{ file.uploaded_at|date:"Y-m-d H:i" }}</small>
                </div>
            </div>
            <a href="{% url 'download_file' file.id %}" class="download-button">â¬‡ ä¸‹è½½</a>
        </div>
        {% empty %}
            <p>æš‚æ— æ–‡ä»¶ã€‚</p>
        {% endfor %}
    </div>
    {% if not show_all and files|length >= 10 %}
    <div class="load-more">
        <a href="?all=1" class="load-more-button">æ˜¾ç¤ºæ›´å¤š...
        </a>
    </div>
    {% endif %}

</body>
</html>
